"undefined"===typeof unsafeWindow&&(unsafeWindow=window);"undefined"===typeof unsafeWindow.MUJS&&(unsafeWindow.MUJS=new function(){this.fn=this.__proto__});
(function(b,A){function t(a){try{return"undefined"===typeof a?"undefined":"number"===typeof a&&1==isNaN(a)?"nan":"object"===typeof a?null===a?"null":a.constructor==={}.constructor?"map":a.constructor===[].constructor?"array":a.constructor===(new Date).constructor?isNaN(a.getTime())?"invaliddate":"date":a.constructor===RegExp().constructor?"regex":Object.prototype.toString.call(a).replace(/^\[object |\]$/g,"").toLowerCase():typeof a}catch(c){return typeof a}}function r(a){if(null==a||"object"!=typeof a)return a;
var c;try{c=a.constructor()}catch(b){switch(t(a)){case "number":c=(new Number).constructor();break;case "array":c=[].constructor();break;case "map":c={}.constructor();break;default:c=a}}for(var f in a)a.hasOwnProperty(f)&&(c[f]=r(a[f]));return c}function w(a,b){if(null==b||-1!=["string","number","date","regex","undefined"].indexOf(t(b)))return r(b);var d=r(a),f;for(f in b)"undefined"===typeof d[f]||null==b[f]||"object"!=typeof b[f]?d[f]=r(b[f]):null==d[f]||"array"==t(d[f])||"object"!=typeof d[f]?
d[f]=r(b[f]):d[f]=w(d[f],b[f]);return d}function s(){var a=Array.prototype.slice.call(arguments);if(0!=a.length){if(1==a.length)return a[0];for(var b=a[0],d=1;d<a.length;d++)b=w(b,a[d]);return b}}function k(a){return"undefined"===typeof a?!1:"undefined"!==typeof a.timeStamp?!0:!1}function m(a){return"undefined"===typeof a?!1:k(a)||"undefined"===typeof a.dirxml?!1:!0}function u(a){return"undefined"!==typeof a&&"undefined"===typeof a.dirxml?!0:!1}function x(){if(k(console))return console;if(k(this.console))return this.console;
if(k(unsafeWindow.console))return unsafeWindow.console;if(k(unsafeWindow.window.console))return unsafeWindow.window.console;if(k(window.console))return window.console}function y(){if(m(console))return console;if(m(this.console))return this.console;if(m(unsafeWindow.console))return unsafeWindow.console;if(m(unsafeWindow.window.console))return unsafeWindow.window.console;if(m(window.console))return window.console}function z(){if(u(unsafeWindow.window.console))return unsafeWindow.window.console;if(u(window.console))return window.console}
var n=-1,p=-1;"undefined"!==typeof unsafeWindow.performance&&"undefined"!==typeof unsafeWindow.performance.timing&&(n=unsafeWindow.performance.now());var l={SearchForKey:{value:function(a){a=a.split(".");for(var b=this,d=0;d<a.length;d++){if("undefined"===typeof b[a[d]])return;b=b[a[d]]}return b},enumerable:!1},setKeyValue:{value:function(a,b,d){a=a.split(".");for(var f=this,e=0;e<a.length-1;e++){if("undefined"===typeof f[a[e]])if(d)f[a[e]]={};else return;f=f[a[e]]}f[a[a.length-1]]=b},enumerable:!1}};
Array.prototype.pushArray||Object.defineProperty(Array.prototype,"pushArray",{value:function(a){if("undefined"!==typeof a)for(var b=0;b<a.length;b++)this.push(a[b]);return this},enumerable:!1});var q={ERROR:{level:1,value:"error"},WARNING:{level:2,value:"warn"},INFO:{level:3,value:"info"},LOG:{level:4,value:"log"},DEBUG:{level:5,value:"debug"}},v=["Debug","Log","Info","Warning","Error"];b.Config={host:"http://myuserjs.org",secure:!1,script:{username:void 0,script_name:void 0},Update:{DOMTiming:!1,
args:{},updateVeriableName:"USMetaData",getType:"data",jQuery:!1,getStats:!1,sampleRate:100},API:{log:{disabled_functions:[],hidden_classes:[],verbosity_level:5},localStorage:{storage_prefix:"MUJS_"}},debug:!1};Object.defineProperties(b.Config,l);"undefined"!==typeof unsafeWindow.MUJS_CONFIGURATION&&(b.Config=s(b.Config,unsafeWindow.MUJS_CONFIGURATION));"undefined"!==typeof unsafeWindow.MUJS_UPDATE_CONFIGURATION&&(b.Config.Update=s(b.Config.Update,unsafeWindow.MUJS_UPDATE_CONFIGURATION));Object.defineProperties(b.Config,
l);Object.defineProperty(b,"config",{value:function(a,c){return"undefined"===typeof c?b.Config.SearchForKey(a):b.Config.setKeyValue(a,c)},enumerable:!1});b.API={MUJS_Log:new function(a,c,d){a=k(a)?a:void 0;c=k(c)?c:void 0;d=k(d)?d:void 0;return{Firebug_ptr:a,Console2_ptr:c,WebConsole_ptr:d,OUTPUT_TYPES:q,updateFirebugPtr:function(a){"undefined"===typeof this.Firebug_ptr&&k(a)&&(this.Firebug_ptr=a)},updateConsole2Ptr:function(a){"undefined"===typeof this.Console2_ptr&&m(a)&&(this.Console2_ptr=a)},
updateWebConsolePtr:function(a){"undefined"===typeof this.WebConsole_ptr&&u(a)&&(this.WebConsole_ptr=a)},ConsoleCommand:function(a,b){var c=Array.prototype.slice.call(arguments,1);"undefined"!==typeof this.Firebug_ptr&&"undefined"!==typeof this.Firebug_ptr[a]&&this.Firebug_ptr[a].apply(this.Firebug_ptr,c);"undefined"!==typeof this.Console2_ptr&&"undefined"!==typeof this.Console2_ptr[a]&&this.Console2_ptr[a].apply(this.Console2_ptr,c);"undefined"!==typeof this.WebConsole_ptr&&"undefined"!==typeof this.WebConsole_ptr[a]&&
this.WebConsole_ptr[a].apply(this.WebConsole_ptr,c)},outputMessage:function(a,c){a.level<=b.config("API.log.verbosity_level")&&this.ConsoleCommand.apply(this,[a.value].pushArray(Array.prototype.slice.call(arguments,1)))},Error:function(a,b){this.outputMessage.apply(this,[q.ERROR,"C.CE Error ("+a+") - "+b.name+" - "+b.message+" in file <"+b.fileName+"> on line "+b.lineNumber])},logError:this.Error,Warning:function(a){this.outputMessage.apply(this,[q.WARNING].pushArray(Array.prototype.slice.call(arguments,
0)))},Info:function(a){this.outputMessage.apply(this,[q.INFO].pushArray(Array.prototype.slice.call(arguments,0)))},Log:function(a){this.outputMessage.apply(this,[q.LOG].pushArray(Array.prototype.slice.call(arguments,0)))},Debug:function(a){this.outputMessage(q.DEBUG,a)},table:function(a){this.ConsoleCommand("table",Array.prototype.slice.call(arguments,0))},count:function(a){-1==b.config("API.log.disabled_functions").indexOf("count")&&this.ConsoleCommand("count",a)},startGroup:function(a){-1==b.config("API.log.disabled_functions").indexOf("startGroup")&&
-1==b.config("API.log.disabled_functions").indexOf("groupEnd")&&-1==b.config("API.log.disabled_functions").indexOf("groupCollapsed")&&this.ConsoleCommand("group",a)},endGroup:function(){-1==b.config("API.log.disabled_functions").indexOf("startGroup")&&-1==b.config("API.log.disabled_functions").indexOf("groupEnd")&&-1==b.config("API.log.disabled_functions").indexOf("groupCollapsed")&&this.ConsoleCommand("groupEnd")},groupCollapsed:function(a){-1==b.config("API.log.disabled_functions").indexOf("startGroup")&&
-1==b.config("API.log.disabled_functions").indexOf("groupEnd")&&-1==b.config("API.log.disabled_functions").indexOf("groupCollapsed")&&this.ConsoleCommand("groupCollapsed",a)},time:function(a){-1==b.config("API.log.disabled_functions").indexOf("time")&&-1==b.config("API.log.disabled_functions").indexOf("timeEnd")&&this.ConsoleCommand("time",a)},timeEnd:function(a){-1==b.config("API.log.disabled_functions").indexOf("time")&&-1==b.config("API.log.disabled_functions").indexOf("timeEnd")&&this.ConsoleCommand("timeEnd",
a)},timeStamp:function(a){-1==b.config("API.log.disabled_functions").indexOf("timeStamp")&&this.ConsoleCommand("timeStamp",a)},assert:function(a,c){var d=Array.prototype.slice.call(arguments,0);d.unshift("assert");-1==b.config("API.log.disabled_functions").indexOf("assert")&&this.ConsoleCommand.apply(this,d)},trace:function(){-1==b.config("API.log.disabled_functions").indexOf("trace")&&this.ConsoleCommand("trace")},clear:function(){-1==b.config("API.log.disabled_functions").indexOf("clear")&&this.ConsoleCommand("clear")},
profile:function(a){var c=Array.prototype.slice.call(arguments,0);c.unshift("profile");-1==b.config("API.log.disabled_functions").indexOf("profile")&&-1==b.config("API.log.disabled_functions").indexOf("profileEnd")&&this.ConsoleCommand.apply(this,c)},profileEnd:function(){var a=Array.prototype.slice.call(arguments,0);a.unshift("profileEnd");-1==b.config("API.log.disabled_functions").indexOf("profile")&&-1==b.config("API.log.disabled_functions").indexOf("profileEnd")&&this.ConsoleCommand.apply(this,
a)}}}(x(),y(),z())};b.log=b.API.MUJS_Log;b.log.UpdateAllPtrs=function(){b.API.MUJS_Log.updateFirebugPtr(x());b.API.MUJS_Log.updateConsole2Ptr(y());b.API.MUJS_Log.updateWebConsolePtr(z())};for(l=0;l<v.length;l++)b[v[l]]=b.API.MUJS_Log[v[l]].bind(b.API.MUJS_Log);b.config("debug")&&b.Log("MUJS.Config",b.Config);b.API.addStyle=function(a){if("undefined"!=typeof a&&""!=a&&(heads=document.getElementsByTagName("head"))){var b=document.createElement("style");try{b.innerHTML=a}catch(d){b.innerText=a}b.type=
"text/css";heads[0].appendChild(b)}return null};b.API.addScript=function(a,b,d,f){if(heads=document.getElementsByTagName("head")){var e=document.createElement("script");if("undefined"!=typeof a&&""!=a)try{e.innerHTML=a}catch(h){e.innerText=a}if("undefined"!=typeof b&&""!=b)try{e.src=b}catch(g){}if("undefined"!==typeof d)try{e.id=d}catch(k){}"undefined"!==typeof f&&(e.async=!0);e.type="text/javascript";try{heads[0].appendChild(e)}catch(l){}}return null};Object.defineProperty(b,"stor",{value:localStorage?
localStorage:unsafeWindow.localStorage?unsafeWindow.localStorage:window.localStorage,enumerable:!1});b.API.localStorage={};b.API.localStorage.getValue=function(a,c){var d=b.config("API.localStorage.storage_prefix")+a;return b.stor[d]?b.stor.getItem(d):c};b.API.localStorage.setValue=function(a,c){var d=b.config("API.localStorage.storage_prefix")+a;return b.stor.setItem(d,c)};b.API.localStorage.deleteValue=function(a,c){var d=b.config("API.localStorage.storage_prefix")+a;return b.stor.removeItem(d)};
b.fn.getValue=b.API.localStorage.getValue;b.fn.setValue=b.API.localStorage.setValue;b.fn.deleteValue=b.API.localStorage.deleteValue;b.API.ParseMetaData_Types=[];b.API.ParseMetaData_Types.push(function(a,b){if("object"===typeof b){for(var d=/\(([0-9\.]+)\)\s+(.*?)$/i,f={},e=0;e<b.length;e++)if(d.test(b[e])){var h=d.exec(b[e]),g=h[1],h=h[2];"undefined"===typeof f[g]&&(f[g]=[]);f[g].push(h)}return f}});b.API.ParseMetaData=function(a){"string"===typeof a&&(a=a.split(/\r?\n/i));for(var c={},d=/@([\S]+)\s+(.*?)$/i,
f=0;f<a.length;f++)if(d.test(a[f])){var e=d.exec(a[f]);"undefined"===typeof c[e[1]]?c[e[1]]=e[2]:("string"===typeof c[e[1]]&&(g=c[e[1]],c[e[1]]=[],c[e[1]].push(g)),c[e[1]].push(e[2]))}for(var h in c)for(f=0;f<b.API.ParseMetaData_Types.length;f++){var g=b.API.ParseMetaData_Types[f](h,c[h]);if("undefined"!==typeof g){c[h]=g;break}}return c};b.fn.getDOMTiming=function(){var a={};try{if("undefined"!==typeof unsafeWindow.performance&&"undefined"!==typeof unsafeWindow.performance.timing){var b=["unloadEventStart",
"unloadEventEnd","navigationStart"],d;for(d in unsafeWindow.performance.timing)isNaN(unsafeWindow.performance.timing[d])||-1!=b.indexOf(d)||(a[d]=parseInt(unsafeWindow.performance.timing[d]));for(d in a)a[d]-=unsafeWindow.performance.timing.navigationStart,0>=a[d]&&delete a[d];var f=(unsafeWindow.performance.timing.loadEventEnd||unsafeWindow.performance.timing.loadEventStart)-unsafeWindow.performance.timing.navigationStart;0<f&&(a.pageLoadTime=f);var e=unsafeWindow.performance.timing.responseEnd-
unsafeWindow.performance.timing.fetchStart;0<=e&&(a.NetworkLatency=e);var h=unsafeWindow.performance.now();0<h&&(a.statReportTime=h);0<n&&(a.mujsAPILoadStart=n);0<p&&(a.mujsAPILoadEnd=p);0<n&&0<p&&0<p-n&&(a.mujsAPILoadTime=p-n)}}catch(g){return console.log("Error! getDOMTiming: ",g),{}}return a};b.UPDATE={getJSON:function(a,c){A.ajax({dataType:"jsonp",url:a+"&json=1",async:!0}).done(function(a){unsafeWindow[b.Config.Update.updateVeriableName]=a;b.UPDATE.execCallback(c,a)}).fail(function(a){b.UPDATE.execCallback(c,
void 0,"error",a)})},getCallbackFunction:function(a){if("string"===typeof a.callback){if("undefined"!==typeof unsafeWindow[a.callback])return unsafeWindow[a.callback]}else return a.callback},execCallback:function(a,b){var d=Array.prototype.slice.call(arguments,1),f=this.getCallbackFunction(a);void 0!==f&&f.apply(f.callback,d)},getUpdateURL:function(a){a.callback&&"string"===typeof a.callback&&(a.callback_function=a.callback);opts=s({},b.Config.Update,a);var c=opts.username||b.config("script.username");
if("undefined"===typeof c||""==c)return this.execCallback(a,void 0,"Error! No Username Provided");var d=opts.script_name||b.config("script.script_name");if("undefined"===typeof d||""==d)return this.execCallback(a,void 0,"Error! No Username Provided");var f=opts.getType||b.config("Update.getType");"meta"!=f&&"metajs"!=f&&"data"!=f&&"none"!=f&&(f="data");var e=opts.args;if(opts.DOMTiming){var h=b.getDOMTiming();b.config("debug")&&b.Log("domTiming",h);for(var g in h)h.hasOwnProperty(g)&&(e[g]=h[g])}h=
[];for(g in e)h.push(g+"="+e[g]);e="args="+escape(h.join(","))+"&updateVeriableName="+opts.updateVeriableName;"undefined"!==typeof opts.callback_function&&(e+="&jsonp="+opts.callback_function);"undefined"!==typeof opts.noDownload&&1==opts.noDownload?e+="&nodownload=1":100>b.config("Update.sampleRate")&&Math.floor(100*Math.random()+1)>b.config("Update.sampleRate")&&(e+="&nodownload=1");b.config("Update.getStats")&&(e+="&getstats=1");if("undefined"!==typeof a.script_info){"undefined"!==typeof a.script_info.version&&
(e+="&scriptversion="+escape(a.script_info.version));"undefined"!==typeof a.script_info.script_handler&&(e+="&scripthandler="+escape(a.script_info.script_handler),"undefined"!==typeof a.script_info.script_handler_version&&(e+="&scripthandlerversion="+escape(a.script_info.script_handler_version)));a.script_info.matched_rules={count:0,include:[],exclude:[],match:[]};if("undefined"!==typeof a.script_info.includes&&0<a.script_info.includes.length)for(g=0;g<a.script_info.includes.length;g++)h=new RegExp(a.script_info.includes[g],
"i"),h.test(window.location.href)&&(a.script_info.matched_rules.include.push(a.script_info.includes[g]),a.script_info.matched_rules.count++);if("undefined"!==typeof a.script_info.excludes&&0<a.script_info.excludes.length)for(g=0;g<a.script_info.excludes.length;g++)h=new RegExp(a.script_info.excludes[g],"i"),h.test(window.location.href)&&(a.script_info.matched_rules.exclude.push(a.script_info.excludes[g]),a.script_info.matched_rules.count++);if("undefined"!==typeof a.script_info.matches&&0<a.script_info.matches.length)for(g=
0;g<a.script_info.matches.length;g++)h=new RegExp(a.script_info.matches[g],"i"),h.test(window.location.href)&&(a.script_info.matched_rules.match.push(a.script_info.matches[g]),a.script_info.matched_rules.count++);0<a.script_info.matched_rules.count&&(a=JSON.stringify(a.script_info.matched_rules),e+="&matchedRules="+escape(a))}b.config("debug")&&(e+="&firephp=1");e+="&cachebuster="+Math.round((new Date).getTime()/1E3);return(b.config("host")||"myuserjs.org")+"/script/"+c+"/"+d+"."+f+".js?"+e},getUpdateData:function(a){try{var c=
s({},b.Config.Update,a);"undefined"!==typeof unsafeWindow[c.updateVeriableName]&&(unsafeWindow[c.updateVeriableName]=void 0,delete unsafeWindow[c.updateVeriableName]);var d=b.UPDATE.getUpdateURL(c);b.config("debug")&&b.Log(d);var f;b.config("Update.jQuery")?f=this.getJSON(d,c):b.API.addScript(void 0,d,void 0,!0);!c.callback||"string"===typeof c.callback&&void 0!==this.getCallbackFunction(c)||b.UPDATE.waitForUpdateData(c);return f}catch(e){console.log("Error! getUpdateData: ",e)}},waitForUpdateData:function(a,
c){"undefined"===typeof c&&(c=0);return"undefined"!==typeof unsafeWindow[a.updateVeriableName]?b.UPDATE.execCallback(a,unsafeWindow[a.updateVeriableName],"Success!"):100<c?b.UPDATE.execCallback(a,void 0,"Error! TimedOut"):setTimeout(b.UPDATE.waitForUpdateData,50,a,c+1)}};Object.defineProperty(b.UPDATE,"MetaData",{get:function(a){if("undefined"!==typeof unsafeWindow[a||b.Config.Update.updateVeriableName])return unsafeWindow[a||b.Config.Update.updateVeriableName];if("undefined"!==typeof window[a||b.Config.Update.updateVeriableName])return window[a||
b.Config.Update.updateVeriableName]}});b.ERROR={send:function(a){try{var c=s({},b.Config.Update,a);"undefined"===typeof c.args&&(c.args={});"undefined"===typeof c.args.scriptError&&(c.args.scriptError="1");"undefined"===typeof c.args.scriptErrorCode&&(c.args.scriptErrorCode="-1");c.getType="none";c.noDownload=!0;return b.UPDATE.getUpdateData(c)}catch(d){console.log("Error! Error.send: ",d)}}};"undefined"!==typeof unsafeWindow.performance&&"undefined"!==typeof unsafeWindow.performance.timing&&(p=unsafeWindow.performance.now())})(unsafeWindow.MUJS,
"undefined"!==typeof jQuery?jQuery:void 0);MUJS=unsafeWindow.MUJS;
